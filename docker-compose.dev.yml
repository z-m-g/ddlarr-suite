# Development override - use with: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up
services:
  ddl-torznab:
    build:
      context: ./indexer
      dockerfile: Dockerfile.dev
    environment:
      - NODE_ENV=development
      - PORT=${INDEXER_PORT:-9117}
      - DEBUG=true
    volumes:
      - ./indexer/src:/app/src
    ports:
      - "${INDEXER_PORT:-9117}:${INDEXER_PORT:-9117}"
      - "9229:9229"  # Node.js debug port
    # Uses tsx watch from Dockerfile.dev CMD

  ddl-downloader:
    build:
      context: ./downloader
      dockerfile: Dockerfile.dev
    environment:
      - NODE_ENV=development
      - PORT=${DOWNLOADER_PORT:-9118}
      - DEBUG=true
    volumes:
      - ./downloader/src:/app/src
      - ./downloader/public:/app/public
    ports:
      - "${DOWNLOADER_PORT:-9118}:${DOWNLOADER_PORT:-9118}"
    # Uses tsx watch from Dockerfile.dev CMD

  dlprotect-resolver:
    environment:
      - FLASK_DEBUG=1
      - PORT=${DLPROTECT_RESOLVER_PORT:-5000}
    ports:
      - "${DLPROTECT_RESOLVER_PORT:-5000}:${DLPROTECT_RESOLVER_PORT:-5000}"
